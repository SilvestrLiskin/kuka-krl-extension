&ACCESS RVP
&REL 3
&COMMENT File WITH errors FOR extension demonstration
DEF Errors_Demo()
    ;==============================================================================
    ;  üî¥ ERROR DEMONSTRATION FILE
    ;  This file contains intentional errors to showcase diagnostics
    ;==============================================================================

    DECL INT validInt
    DECL REAL validReal
    DECL BOOL validBool
    DECL E6POS validPos

    validInt = 10
    validReal = 3.14
    validBool = TRUE

    ;==============================================================================
    ;  1Ô∏è‚É£ UNDEFINED VARIABLES
    ;==============================================================================

    ; ‚ùå Variable never declared - will show "Undefined variable" error
    myUndefined = 100

    ; ‚ùå Multiple undefined variables
    result = valueA + valueB * valueC

    ; ‚ùå Undefined in expression
    validInt = validInt + unknownValue

    ;==============================================================================
    ;  2Ô∏è‚É£ TYPE ERRORS
    ;==============================================================================

    ; ‚ùå Assigning REAL (decimal) to INT variable
    DECL INT shouldBeInt
    shouldBeInt = 15.75

    ; ‚ùå Using REAL in SWITCH statement (must be INT)
    DECL REAL floatSwitch
    floatSwitch = 2.5
    SWITCH floatSwitch
    CASE 1
        ; Error - SWITCH requires INT
    CASE 2
        ; Error
    ENDSWITCH

    ;==============================================================================
    ;  3Ô∏è‚É£ SAFETY WARNINGS
    ;==============================================================================

    ; ‚ö†Ô∏è WARNING: Velocity exceeds safe limit (>3 m/s)
    $VEL.CP = 5.2

    ; ‚ö†Ô∏è WARNING: Very high velocity
    $VEL.CP = 10.0

    ; ‚ö†Ô∏è Movement BEFORE $TOOL initialization
    ; PTP {X 100, Y 0, Z 500}

    ;==============================================================================
    ;  4Ô∏è‚É£ UNMATCHED BLOCKS
    ;==============================================================================

    ; ‚ùå IF without ENDIF
    IF validBool == TRUE THEN
        validInt = 1
        ; Missing ENDIF here!

        ; ‚ùå FOR without ENDFOR
        DECL INT loopVar
        FOR loopVar = 1 TO 5
            validReal = validReal + 0.1
            ; Missing ENDFOR here!

            ; ‚ùå WHILE without ENDWHILE
            WHILE validInt < 100
                validInt = validInt + 1
                ; Missing ENDWHILE here!

                ;==============================================================================
                ;  5Ô∏è‚É£ UNREACHABLE CODE (Dead Code)
                ;==============================================================================

                RETURN

                ; ‚ö†Ô∏è WARNING: This code will never execute!
                validInt = 999
                PTP validPos

                ;==============================================================================
                ;  6Ô∏è‚É£ GLOBAL/PUBLIC CONSISTENCY
                ;==============================================================================

                ; This will flag if GLOBAL is used without PUBLIC in DEFDAT
                ; See corresponding .dat file for matching test

            END

            ;==============================================================================
            ;  ADDITIONAL FUNCTION WITH ERRORS
            ;==============================================================================
            DEF BrokenFunction(param1:IN)
                ; ‚ùå Parameter used but type not declared
                DECL INT result

                ; ‚ùå Using undefined 'param1' (type IN but no type specification)
                result = param1 * 2

                ; ‚ùå Missing RETURN for function
            END
